RUCKY-PANN/
├─ src/
│  ├─ components/
│  │  └─ planet/                   // 🌐 地形とUI描画レイヤー
│  │     ├─ AreaTrigger.jsx       // 大陸進入・イベント発火のトリガー検出
│  │     ├─ AtmosphericLayer.jsx  // 空気・霧・光のレイヤー演出
│  │     ├─ CameraController.jsx  // 視点操作（パン・ズーム・固定など）
│  │     ├─ ContinentLayer.jsx    // 大陸メッシュ生成・配置
│  │     ├─ dialog.css            // Dialog位置・スタイル制御用CSS
│  │     ├─ FallbackR3F.jsx       // R3F描画失敗時のフォールバックUI
│  │     ├─ Koi.jsx               // PANNS-GOD鯉の霊的存在としての描画
│  │     ├─ Planet.astro          // Astro統合のPlanetUI起点
│  │     ├─ PlanetBase.jsx        // 地面・水面など基盤レイヤー
│  │     ├─ PlanetCanvas.jsx      // Three.js Canvas・レンダリング本体
│  │     ├─ PlanetScene.jsx       // Three.jsのシーン全体構築（空・光源・大陸・霧など）
│  │     ├─ SectorDialog.jsx      // エリアに応じて現れる対話ウィンドウ
│  │     └─ ShaderMateria.jsx     // 発光・反射など独自シェーダー演出
│
│  ├─ planetData/                 // 🌍 地形情報と状態管理レイヤー
│  │     ├─ areaData.jsx          // エリア別の属性・境界データ
│  │     ├─ continentShapeMap.js  // 各大陸の輪郭・高さ・色定義（+ 曲線生成付き）
│  │     ├─ PlanetContext.jsx     // React Context によるグローバル状態共有
│  │     ├─ PlanetProvider.jsx    // 状態管理の実装とUIとの接続
│  │     └─ planetThemeMap.js     // 大陸テーマ（カテゴリ・雰囲気）情報
│
│  ├─ styles/
│  │     ├─ planet.css            // Canvas・大陸・メニューのスタイル統合
│  │     ├─ dialog.css            // Dialogの表示アニメーション・位置
│  │     └─ glowUtils.css         // 境界や発光エフェクトのユーティリティCSS
│
│  ├─ utils/
│  │     ├─ noiseUtils.ts         // ノイズ生成（輪郭揺らぎ・地形起伏）
│  │     ├─ meshBuilder.ts        // outline → Mesh変換補助関数
│  │     └─ shaderUtils.ts        // シェーダーの補助設定
│
├─ public/
│  └─ assets/
│     ├─ textures/                // 土壌・水流・大陸模様のテクスチャ
│     └─ icons/                   // 大陸のアイコン・UIバッジ
│
├─ shaders/                       // 🎨 GLSLシェーダーファイル群
│  ├─ custom.frag                 // フラグメントシェーダ（色・発光・反射処理）
│  └─ custom.vert                 // バーテックスシェーダ（頂点変形・起伏表現）
│
├─ astro.config.mjs              // Astro構成（UIレイヤーのルーティングに関与）
├─ tsconfig.json                 // TypeScript型定義（strictモード対応）
└─ package.json                  // 依存関係（Three.js, R3F, Tailwindなど）



✅ 安定セット（React 18系対応）：
ライブラリ名	推奨バージョン（2025年7月現在）
three	^0.160.0
@react-three/fiber	^8.16.5
@react-three/drei	^9.96.1
react	18.2.0
react-dom	18.2.0



USER@DESKTOP-OG23P70 MINGW64 ~/Desktop/RUCKY-PANN (master)
$ npm list three @react-three/fiber @react-three/drei
rucky-pann@0.0.1 C:\Users\USER\Desktop\RUCKY-PANN
├─┬ @react-three/drei@9.96.1
│ ├─┬ @react-spring/three@9.6.1
│ │ ├── @react-three/fiber@8.16.5 deduped
│ │ └── three@0.160.0 deduped
│ ├── @react-three/fiber@8.16.5 deduped
│ ├─┬ camera-controls@2.10.1
│ │ └── three@0.160.0 deduped
│ ├─┬ maath@0.10.8
│ │ └── three@0.160.0 deduped
│ ├─┬ meshline@3.3.1
│ │ └── three@0.160.0 deduped
│ ├─┬ stats-gl@2.4.2
│ │ └── three@0.170.0
│ ├─┬ three-mesh-bvh@0.7.6
│ │ └── three@0.160.0 deduped
│ ├─┬ three-stdlib@2.36.0
│ │ └── three@0.160.0 deduped
│ ├── three@0.160.0 deduped
│ └─┬ troika-three-text@0.47.2
│   ├── three@0.160.0 deduped
│   └─┬ troika-three-utils@0.47.2
│     └── three@0.160.0 deduped
├─┬ @react-three/fiber@8.16.5
│ └── three@0.160.0 deduped
└── three@0.160.0


⚠️ 相性でよくあるクラッシュパターン
状況	原因	対策
three@0.155+ + @react-three/fiber@8.0未満	R3Fが内部APIに追従していない	threeとfiberをセットで更新
drei@最新 + fiber@旧	dreiが依存するR3F機能がない	dreiはfiberに合わせて同時更新
React 19（RC）使用	R3Fがまだ未対応 or unstable	React 18.xが安定版。絶対に19を入れない
Next.jsでssr: false未設定	R3FがSSRでクラッシュ	AstroやViteでも**client:only指定が必須**
